import{s as g,g as a,a as r,b as s,c as i}from"./index-D54wz-gh.js";async function b(){console.log("[DEBUG] Opening settings"),g("settings");try{const o=await a()("get_autostart_enabled"),e=r("autostart-toggle");e&&(e.checked=o)}catch(t){console.error("Failed to load autostart setting:",t)}setTimeout(()=>{const t=r("autostart-toggle");t&&t.addEventListener("change",async o=>{try{const e=a(),n=o.target;await e("set_autostart_enabled",{enabled:n.checked})}catch(e){console.error("Failed to set autostart:",e);const n=o.target;n.checked=!n.checked}}),s("logout-btn",()=>u()),s("export-debug-log-btn",()=>l()),s("back-from-settings-btn",()=>{g("authenticated")})},100)}async function l(){console.log("[DEBUG] Exporting debug log");const t=r("export-debug-log-btn"),o=r("debug-log-path");if(!(!t||!o))try{const e=t.textContent;t.textContent="Exporting...",t.setAttribute("disabled","true");const c=await a()("export_debug_log");t.textContent="âœ“ Exported!",o.textContent=`Log saved to: ${c}`,o.classList.remove("hidden"),setTimeout(()=>{t.textContent=e,t.removeAttribute("disabled")},3e3)}catch(e){console.error("Failed to export debug log:",e),t.textContent="Export Failed",t.removeAttribute("disabled"),setTimeout(()=>{t.textContent="Export Debug Log"},2e3),i(`Failed to export debug log: ${e}`)}}async function u(){if(console.log("[DEBUG] Logging out"),!!confirm("Are you sure you want to logout?"))try{await a()("clear_auth_tokens"),location.reload()}catch(t){console.error("Failed to logout:",t),i(`Failed to logout: ${t}`)}}export{l as handleExportDebugLog,u as handleLogout,b as openSettings};
