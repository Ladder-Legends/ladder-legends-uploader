import{s as u,g as s,a,b as l,c as g}from"./index-CKZHPvOM.js";async function x(){console.log("[DEBUG] Opening settings"),u("settings");const t=document.querySelector("#settings-state .settings-content");t&&(t.scrollTop=0);try{const n=await s()("get_autostart_enabled"),e=a("autostart-toggle");e&&(e.checked=n)}catch(o){console.error("Failed to load autostart setting:",o)}setTimeout(()=>{const o=a("autostart-toggle");o&&o.addEventListener("change",async n=>{try{const e=s(),r=n.target;await e("set_autostart_enabled",{enabled:r.checked})}catch(e){console.error("Failed to set autostart:",e);const r=n.target;r.checked=!r.checked}}),l("logout-btn",()=>p()),l("export-debug-log-btn",()=>d()),l("back-from-settings-btn",()=>{u("authenticated")})},100)}let i=null;async function d(){console.log("[DEBUG] Exporting debug log");const t=a("export-debug-log-btn"),o=a("debug-log-result"),n=a("debug-log-path");if(!(!t||!o||!n))try{const e=t.textContent;t.textContent="Exporting...",t.setAttribute("disabled","true");const c=await s()("export_debug_log");i=c,t.textContent="âœ“ Exported!",n.textContent=c,o.classList.remove("hidden"),l("open-debug-folder-btn",()=>b()),setTimeout(()=>{t.textContent=e,t.removeAttribute("disabled")},3e3)}catch(e){console.error("Failed to export debug log:",e),t.textContent="Export Failed",t.removeAttribute("disabled"),setTimeout(()=>{t.textContent="Export Debug Log"},2e3),g(`Failed to export debug log: ${e}`)}}async function b(){if(!i){g("No debug log has been exported yet");return}try{await s()("open_folder_for_path",{path:i})}catch(t){console.error("Failed to open folder:",t),g(`Failed to open folder: ${t}`)}}async function p(){if(console.log("[DEBUG] Logging out"),!!confirm("Are you sure you want to logout?"))try{await s()("clear_auth_tokens"),location.reload()}catch(t){console.error("Failed to logout:",t),g(`Failed to logout: ${t}`)}}export{d as handleExportDebugLog,p as handleLogout,b as handleOpenDebugFolder,x as openSettings};
